#!/bin/bash

mname="Deadly Prey"
mrip="VHSRip"
myear="1985"
mtags="[awesome]"
mdir="."

for filename in *; do
        isdirectory="no"
        echo
        echo "Processing $filename"
        echo "What's the name of the movie?"
        read mname
        if [ -z "$mname" ]; then
                echo "OK, skipping $filename"
                echo "**************************************************************"
        else
                if [ -d "$filename" ]; then
                        isdirectory="yes"
                fi

                echo "What kind of rip is it (Vhs,Dvd,Tv,Bluray,Netflix)?"
                read whatrip
                case $whatrip in
                        v | V ) mrip="VHSRip"
                                ;;
                        d | D ) mrip="DVDRip"
                                ;;
                        t | T ) mrip="TVRip"
                                ;;
                        b | B ) mrip="Blurayrip"
                                ;;
                        n | N ) mrip="Netflixrip"
                                ;;
                        * )     mrip=$whatrip
                                ;;
                esac
                echo "What year is it from?"
                read myear
                echo "Any other tags you want?"
                read mtags

                if [ -z "$mtags" ]; then
                        mdir="$mname ($myear) ($mrip)"
                else
                        mdir="$mname ($myear) ($mrip) $mtags"
                fi

                echo
                echo "OK, directory name will be"
                echo $mdir

                mkdir "$mdir"
                mv "$filename" "$mdir"
                cd "$mdir"
                if [ $isdirectory = "yes" ]; then
                        cd "$filename"
                fi

                echo "Generating thumbnails"
                for tname in *; do
                        vcs -c 3 -n 21 -u Moviefixerscript -q -q -j "$tname" &
                done

                echo "Done processing \"$filename\" - moving on!"
                cd ..
                if [ $isdirectory = "yes" ]; then
                        cd ..
                fi
        fi
done
